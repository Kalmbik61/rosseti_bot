# üîÑ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Ç–µ—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–æ–≤–æ–º –¥–µ–ø–ª–æ–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ë–î –∏ —É–¥–∞–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—Ç–µ—Ä–µ:

- –°–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- –ù–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ò—Å—Ç–æ—Ä–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. –†–∞–∑–ª–∏—á–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ volumes

**–û–±—ã—á–Ω—ã–π Docker Compose:**

```yaml
volumes:
  - ./data:/app/data # bind mount - –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞—Ç–∏—Ä–∞—Ç—å—Å—è
```

**Dokploy –≤–µ—Ä—Å–∏—è:**

```yaml
volumes:
  - rosseti_data:/app/data # named volume - –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è
```

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ø–ª–æ—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ compose —Ñ–∞–π–ª–∞
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ volumes –≤–º–µ—Å—Ç–æ –∏—Ö –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–ª—è Dokploy (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π compose —Ñ–∞–π–ª

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Dokploy —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω —Ñ–∞–π–ª:

```
docker-compose.dokploy.yml
```

–ê –ù–ï –æ–±—ã—á–Ω—ã–π `docker-compose.yml`

#### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ volumes –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–í Dokploy UI –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–µ–∫—Ü–∏—é **Volumes** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:

- ‚úÖ `rosseti_data` - –ë–î –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ `rosseti_logs` - –ª–æ–≥–∏
- ‚úÖ `rosseti_reports` - –æ—Ç—á–µ—Ç—ã

#### 3. –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –≤ Dokploy:

```yaml
labels:
  - "dokploy.backup=true"
  - "dokploy.backup.schedule=daily"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ Docker Compose

#### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ named volumes –≤–º–µ—Å—Ç–æ bind mounts

–û–±–Ω–æ–≤–∏—Ç–µ `docker-compose.yml`:

```yaml
services:
  rosseti-parser:
    volumes:
      # –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–æ:
      # - ./data:/app/data

      # –ù–∞ —ç—Ç–æ:
      - rosseti_data:/app/data
      - rosseti_logs:/app/logs
      - rosseti_reports:/app/reports

volumes:
  rosseti_data:
    driver: local
  rosseti_logs:
    driver: local
  rosseti_reports:
    driver: local
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

```bash
#!/bin/bash
# backup-before-deploy.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="./backups/deploy_$DATE"

mkdir -p "$BACKUP_DIR"

# –ë—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö –∏–∑ volume
docker run --rm \
  -v rosseti_data:/data \
  -v "$PWD/$BACKUP_DIR":/backup \
  alpine tar czf /backup/data.tar.gz -C /data .

echo "–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: $BACKUP_DIR/data.tar.gz"
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å:

#### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
ls -la ./data/backups/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ë–î
cp ./data/backups/subscriptions_YYYYMMDD_HHMMSS.db ./data/subscriptions.db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose restart rosseti-parser
```

#### 2. –ï—Å–ª–∏ –±—ç–∫–∞–ø–∞ –Ω–µ—Ç - –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Ç–µ—Ä—è–Ω—ã:

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–Ω–æ–≤–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `/subscribe`
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–±—Ä–æ—Å–∏—Ç—Å—è –Ω–∞ 6 —á–∞—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —á–µ—Ä–µ–∑ `/admin_set_interval`

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å bind mounts –Ω–∞ named volumes:

#### 1. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down

# –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø
cp -r ./data ./data_backup_$(date +%Y%m%d)
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ named volume –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

```bash
# –°–æ–∑–¥–∞–π—Ç–µ volume
docker volume create rosseti_data

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ volume
docker run --rm \
  -v "$PWD/data":/source \
  -v rosseti_data:/target \
  alpine cp -r /source/. /target/
```

#### 3. –û–±–Ω–æ–≤–∏—Ç–µ compose —Ñ–∞–π–ª –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose up -d
```

## –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab:

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 3:00
0 3 * * * /path/to/project/scripts/backup.sh
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ –ë–î –≤ –ª–æ–≥–∞—Ö:

```bash
docker-compose logs rosseti-parser | grep "Database:"
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–î–ª—è Dokploy:**

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose.dokploy.yml`
- ‚úÖ Named volumes
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã —á–µ—Ä–µ–∑ Dokploy

**–î–ª—è –æ–±—ã—á–Ω–æ–≥–æ Docker:**

- ‚úÖ Named volumes –≤–º–µ—Å—Ç–æ bind mounts
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã —á–µ—Ä–µ–∑ cron
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ volumes –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ volumes:

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö volumes
docker volume ls

# –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ volume
docker volume inspect rosseti_data

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ volume
docker run --rm -v rosseti_data:/data alpine ls -la /data
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ë–î:

```bash
# –í —Ä–∞–±–æ—Ç–∞—é—â–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec rosseti-parser-bot ls -la /app/data/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ë–î
docker exec rosseti-parser-bot du -h /app/data/subscriptions.db
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ —Å –ë–î
docker-compose logs rosseti-parser | grep -i "database\|error"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
docker-compose logs rosseti-parser | grep "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î"
```

## –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º

- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–π –ë–î
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- [ ] –ó–∞–ø–∏—Å–∞–Ω—ã —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π compose —Ñ–∞–π–ª
- [ ] Volumes –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–∞–∫ named volumes
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ–µ

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Dokploy/Docker
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

**–ü–æ–º–Ω–∏—Ç–µ:** –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã - –ª—É—á—à–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö!
